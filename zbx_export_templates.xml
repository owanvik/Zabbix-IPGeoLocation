<?xml version="1.0" encoding="UTF-8"?>
<zabbix_export>
    <version>7.0</version>
    <template_groups>
        <template_group>
            <uuid>7df96b18c230490a9a0a9e2307226338</uuid>
            <name>Templates</name>
        </template_group>
    </template_groups>
    <templates>
        <template>
            <uuid>ace9490d916a46c2abd0b02869319837</uuid>
            <template>Template IPGeoLocation</template>
            <name>Template IPGeoLocation</name>
            <description>This template assigns the GeoLocation fields in inventory on hosts from ipgeolocation.io

Data collection runs every 24h.

ipgeolocation.io Developer account is free under 30K requests per month</description>
            <groups>
                <group>
                    <name>Templates</name>
                </group>
            </groups>
            <items>
                <item>
                    <uuid>8f4d150db388406c8da913ed970cb180</uuid>
                    <name>City</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.city</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>SITE_CITY</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.city</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>ea34d82b03bd4553be1e045b032cebb7</uuid>
                    <name>Country</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.country</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>SITE_COUNTRY</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.country_name</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>46deff68de914cbf8cf6d61e8fc878a0</uuid>
                    <name>Latitude</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.latitude</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>LOCATION_LAT</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.latitude</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e5c36d717609417688b59b97677985f4</uuid>
                    <name>Longitude</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.longitude</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>LOCATION_LON</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.longitude</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>8ca7124ad6934af798e7229498c402c5</uuid>
                    <name>State / Province</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.stateprov</key>
                    <delay>0</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <inventory_link>SITE_STATE</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.state_prov</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e450fa3b0ead4f9a95c8e3b8cec238da</uuid>
                    <name>Zipcode</name>
                    <type>DEPENDENT</type>
                    <key>geoloc.zip</key>
                    <delay>0</delay>
                    <inventory_link>SITE_ZIP</inventory_link>
                    <preprocessing>
                        <step>
                            <type>JSONPATH</type>
                            <parameters>
                                <parameter>$.zipcode</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <master_item>
                        <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    </master_item>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
                <item>
                    <uuid>e04e347030324941afa5d5f0ed244dbe</uuid>
                    <name>GeoLocation</name>
                    <key>web.page.regexp[https://api.ipgeolocation.io/ipgeo?apiKey={$APIKEY},,,.+\{.+\}]</key>
                    <delay>24h</delay>
                    <trends>0</trends>
                    <value_type>TEXT</value_type>
                    <preprocessing>
                        <step>
                            <type>REGEX</type>
                            <parameters>
                                <parameter>.+\{.+\}</parameter>
                                <parameter>\0</parameter>
                            </parameters>
                        </step>
                    </preprocessing>
                    <tags>
                        <tag>
                            <tag>GeoLoc</tag>
                        </tag>
                    </tags>
                </item>
            </items>
            <macros>
                <macro>
                    <macro>{$APIKEY}</macro>
                    <value>ENTER YOUR API KEY</value>
                    <description>Your ipgeolocation.io API key</description>
                </macro>
            </macros>
        </template>
    </templates>
</zabbix_export>
